# Software Engineering

## #06/07 REST APIs und Strapi

WSEG / FS24

Note:
[Source](https://github.com/digital-sustainability/module-wseg/tree/24/fs/docs/slides/content/06) licensed under [CC-BY-4.0](https://github.com/digital-sustainability/module-wseg/blob/main/LICENSE)

--

1. Kurzinfo Datenmodellierung üìö
2. Entwicklungsumgebung üõ†Ô∏è
   - Strapi als Backend
3. Start **Deliverable 2** üèÉ
   - Infos **Blogpost**
   - Deadline 6. November üèÅ

---

### Vorgriff: .gitignore

- Credentials sind ausgeschlossen
  - Datenbank (liegt in .tmp-Ordner)
  - Admin-Hash (.env)

---

### APIs komfortabel nutzen

Geeignete Software zum Testen

- [Insomnium (freie Software)](https://github.com/ArchGPT/insomnium)
- [Bruno (freie Software)](https://www.usebruno.com/)
- [Postman (propriet√§r)](https://www.postman.com/)
- [Insomnia (freie Software mit Login-Zwang)](https://github.com/Kong/insomnia)

---

### (normalen) User in Strapi erstellen

POST an http://localhost:1337/api/auth/local/register mit

```
{
  "username": "testuser",
  "email": "test@test.ch",
  "password": "123456"
}
```

siehe: https://docs.strapi.io/dev-docs/plugins/users-permissions#usage-1
(Default: Roles & Permissions > Advanced Settings > Enable sign-ups )

--

### User authentifizieren

POST an http://localhost:1337/api/auth/local

```
{
	"identifier": "testuser",
	"password": "123456"
}
```

R√ºckmeldung enth√§lt ein https://de.wikipedia.org/wiki/JSON_Web_Token

Note:
https://strapi.io/blog/a-beginners-guide-to-authentication-and-authorization-in-strapi
https://docs.strapi.io/dev-docs/plugins/users-permissions

--

### Login-Ablauf + private API

![](https://imgur.com/OiNHxS2.png)

---

### JWT im Header

```
> GET /api/inserate?populate=* HTTP/1.1
> Host: localhost:1337
> User-Agent: insomnia/2023.5.8
> Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6NywiaWF0IjoxNjk4NjU2MjU5LCJleHAiOjE3MDEyNDgyNTl9.t6clZ6zWkAGHafbVR4dW4pO4BY60jz8L2Ygu9VupgXQ
```

- wie jedes mal das JWT mitschicken?
  - [mit einem HTTPInterceptor in Angular](https://jasonwatmore.com/post/2021/09/24/angular-http-interceptor-to-set-auth-header-for-api-requests-if-user-logged-in)
  - [sp√§rliche Referenz](https://angular.io/api/common/http/HttpInterceptor)

---

### Requests via Angular-Bibliothek

https://docs.strapi.io/dev-docs/integrations/angular#use-the-angular-http-client

---

### Career Services BFH-W

Bewerbungsfotos: **Heute Nachmittag von 14-16.30 Uhr**.
Der Fotograf erwartet die Studierenden im Videostudio (Eingang hinter der Turnhalle).

#### Create your future

Kurse von Kitoko People (progressive F√ºhrungs- und Arbeitsformen)

- 07.11.2023, 17.10 bis 20.00 Uhr, H258
- 30.11.2023, 17.10 bis 20.00 Uhr, H258
- [Infos beim Career Service](https://www.bfh.ch/studierendenportal/wirtschaft/de/rund-ums-studium/studiengaenge-w/angebote/jobs-karriere/career-services-am-w/)

---

### Vorbereitungsauftrag

- üìò Sommerville "Testing": Kapitel 9.1, 9.2, 9.3 und 9.5

---

### Blog: Textformat

- Markdown (Name z.B. Sprint2-Blog.md)
  - wird direkt in Gitlab verwendet.
  - erm√∂glicht eingebettete Bilder
    - (z.B. im Unterorder "assets")
  - erm√∂glicht Hyperlinks zu externen Ressourcen bzw. auch gitlab-intern.
- Umfang: 750 - 1500 Worte
- üí° Referenz und Beispiel:
  - https://gitlab.com/gitlab-org/gitlab/-/blob/master/doc/user/markdown.md

---

### Blog: Merge-Request

---

### Blog: 6. November üèÅ

Ladet die Blog-Datei mitsamt verkn√ºpften Inhalten in den Dokumentationsordner eures Repositories.

- Bewertung: Blog-Beitrag [...] bis 23:59 im Repository auf dem **main-Branch**

---

### Organisation Coaching n√§chstes Mal

- im Anschluss: Was braucht ihr?
- jederzeit üìß an joerg.berkel@bfh.ch

---

### Vorbereitungsauftrag

- üìò Plattform-Prototyp mit Komponenten begonnen haben
  - ggf. Learning Angular-Serie weitermachen

---

### ‚ù§Ô∏è-lichen Dank f√ºr eure Aufmerksamkeit

- üí¨ Nutzt das Q&A-Forum
- Gerne weitere Lernmaterialien unter https://hackmd.io/@jb/wseg-materialien erg√§nzen!
